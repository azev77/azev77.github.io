---
layout: archive 
title: "Simpson's Paradox is a Special Case of Omitted Variable Bias"
permalink: /Simpson_OVB.html
author_profile: true 
---


<!-- AZ: include script below for math-Latex -->
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<!-- AZ: math-Latex -->
<br> <br>
The goal of this post is to illustrate a point made in a recent 
<a href="https://twitter.com/AmitEcon/status/1368990015536119813?s=20">tweet</a>
by 
<a href="https://web.sas.upenn.edu/agandhi/">Amit Ghandi </a>
that Simpson's Paradox is a special case of omitted variable bias (OVB).

<br> <br>
I will use an example from 
<a href="https://www.youtube.com/watch?v=t-Ci3FosqZs">How SIMPSON'S PARADOX explains weird COVID19 statistics</a>.
(This example is for illustrative purposes only. This post is about statistics, not COVID-19).
<br> 
The video compares those diagnosed with COVID-19 in China and Italy between March and May 2020. 
<br>
<u>Outcome by country</u>: people infected with COVID-19 were more likely to survive in China than Italy. 
<br>
<u>Outcome by country-age group</u>: at each age bracket, people infected with COVID-19 were more likely to survive in Italy than China.
<br>
Let's illustrate this with a simulation, but first summarize notation in the table below:
\begin{array}{|l|l|l|}
\hline
  \text{Outcome: } Y_{i} & \text{Treatment: } X_{i} & \text{Confounder: } Z_{i}\\ 
\hline
Y_{i} \equiv 0 \text{ if person i survives} & X_{i} \equiv 0 \text{ if person i is in China} & Z_{i} \equiv \text{ age of person i} \\
Y_{i} \equiv 1 \text{ if person i dies}     & X_{i} \equiv 1 \text{ if person i is in Italy} &  \\
\hline
\end{array}


<br> <br>
Let's start with a definition:
<br>
 <b>Case Fatality Rate (CFR)</b>: 
the proportion of people who die from a specified disease among all individuals diagnosed with the disease over a certain period of time.
<br> 
We will compare those diagnosed with COVID-19 in China and Italy between March and May 2020. 
<br>
<u>Outcome by country</u>: people infected with COVID-19 were more likely to survive in China than Italy 
<br>
<u>Outcome by country-age group</u>: at each age bracket, people infected with COVID-19 were more likely to survive in Italy than China



<br> <br>
Example: 
<a href="https://www.youtube.com/watch?v=t-Ci3FosqZs">Covid</a>
<br> 
Y = case fatality rate
<br> 
X = country China/Italy
<br> 
Z = age


<br> <br>
The non-causal interpretation of $\beta_{xy}$ is:
<br> 
Assumption: 
<br> 
The causal interpretation of $\beta_{xy}$ is:
<br> 
Assumption: 
<br> 
AZ: even w/o causal assumption, still useful for non-causal prediction

<br> <br>
Suppose the true model is:
$y_{i} = \beta_{0} + \beta_{xy} x_{i} + \beta_{zy} z_{i} + \nu_{i}$
<br>
Suppose you omit $z_{i}$ and instead estimate:
$y_{i} = \beta_{0} + \beta_{xy} x_{i} + u_{i} \Rightarrow u_{i} = \beta_{zy} z_{i} + \nu_{i} $
<br>
Suppose $x_{i}$ predicts $z_{i}$:
$z_{i} = \delta_{xz} x_{i} + w_{i} \Rightarrow \delta_{xz} = \frac{\sigma_{xz}}{\sigma_{x}^2} = \rho_{xz}\times \frac{\sigma_{z}}{\sigma_{x}} $
<br>
Denote the OLS estimate (from equation 2) $\hat{\beta}_{xy}$. 
We have: $E[\hat{\beta}_{xy}|x_{i}] = \beta_{xy} + \underbrace{\delta_{xz} \beta_{zy}}_{\text{bias}}$
<br>
$\text{Bias} = \delta_{xz} \beta_{zy} = 
\left( \rho_{xz}\times \frac{\sigma_{z}}{\sigma_{x}} \right)
\times 
\left( \rho_{zy}\times \frac{\sigma_{y}}{\sigma_{z}} \right)
=
\rho_{xz}\times \rho_{zy} \times \frac{\sigma_{y}}{\sigma_{x}} 
$
<br>
The bias is the product of 
(1) the impact of the treatment on the OV $\delta_{xz}$ 
and
(2) the impact of the OV on the outcome $\beta_{zy}$.
<br>
The estimate will be unbiased if either (1) the treatment is uncorrelated w/ the OV, 
or 
(2) the OV is uncorrelated w/ the outcome.
<br> <br>
$X \sim N\left(\mu, \sigma^2 \right)$
